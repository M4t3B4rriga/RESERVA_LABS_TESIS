-- Modificando la tabla T_MSUSUARIO para agregar el campo ROL
ALTER TABLE T_MSUSUARIO
ADD ROL ENUM('Estudiante', 'Administrativo', 'Profesor') NOT NULL DEFAULT 'Estudiante';

-- Creando la tabla T_REGISTRO_SOLICITUD para gestionar solicitudes de registro
CREATE TABLE T_REGISTRO_SOLICITUD (
    PK_REGISTRO_SOLICITUD INT AUTO_INCREMENT PRIMARY KEY,
    PK_TMCPERSONA_INTERNA INT NOT NULL,
    USU_NOMBRE VARCHAR(30) NOT NULL,
    XEUSU_PASWD VARCHAR(256) NOT NULL,
    PEI_NOMBRE VARCHAR(50) NOT NULL,
    PEI_APELLIDO_PATERNO VARCHAR(50) NOT NULL,
    PEI_APELLIDO_MATERNO VARCHAR(50),
    PEI_EMAIL_INSTITUCIONAL VARCHAR(100) NOT NULL,
    ROL ENUM('Estudiante', 'Administrativo', 'Profesor') NOT NULL,
    ESTADO ENUM('Pendiente', 'Aceptado', 'Rechazado') NOT NULL DEFAULT 'Pendiente',
    FECHA_SOLICITUD DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    FECHA_RESPUESTA DATETIME,
    COMENTARIO_ADMIN VARCHAR(255),
    FOREIGN KEY (PK_TMCPERSONA_INTERNA) REFERENCES T_MCPERSONA_INTERNA(PK_TMCPERSONA_INTERNA)
);
